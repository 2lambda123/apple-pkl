//===----------------------------------------------------------------------===//
// Copyright Â© 2024 Apple Inc. and the Pkl project authors. All rights reserved.
//
// Licensed under the Apache License, Version 2.0 (the "License");
// you may not use this file except in compliance with the License.
// You may obtain a copy of the License at
//
//     https://www.apache.org/licenses/LICENSE-2.0
//
// Unless required by applicable law or agreed to in writing, software
// distributed under the License is distributed on an "AS IS" BASIS,
// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
// See the License for the specific language governing permissions and
// limitations under the License.
//===----------------------------------------------------------------------===//

/// Settings for controlling how Pkl interacts with HTTP(s) connections.
///
/// HTTP settings can be set in either the global 
@Since { version = "0.26.0" }
module pkl.HttpSettings

/// Determines whether Pkl connects to a proxy or not.
proxy: Proxy?

class Proxy {
  /// The proxy to use for HTTP(s) connections.
  ///
  /// At the moment, only HTTP proxies are supported.
  ///
  /// Example:
  /// ```
  /// local proxyPassword = read("my-proxy-password.txt").text
  /// address = "http://myuser@\(proxyPassword):my.proxy.example.com:5080"
  /// ```
  address: Uri(startsWith("http://"))

  /// Hosts to disable connecting to via a proxy.
  ///
  /// Values can be either hostnames, IP addresses, or CIDR blocks.
  ///
  /// Follows the same rules as cURL's [--noproxy](https://curl.se/docs/manpage.html#--noproxy)
  /// flag.
  noProxy: Listing<String>(isDistinct)
}
